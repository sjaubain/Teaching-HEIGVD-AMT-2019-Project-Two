swagger: '2.0'
info:
  version: '0.1.0'
  title: my simple api v.2
  description: An API to rate movies
host: localhost:9191
basePath: /api
schemes:
  - http
paths:
  /movies:
    get:
      description: get the list of all movies
      operationId: getMovies
      produces:
        - application/json
      parameters:
        - name: keyword
          in: query
          required: false
          schema:
            type: string
        - name: Authorization
          in: header
          required: true
          schema:
            $ref: '#/definitions/JWT'
      responses:
        '200':
          description: success
          schema:
            type: array
            items:
              $ref: '#/definitions/Movie'
  /movies/{ratings}:
    get:
      description: get all ratings for a specific movie
      operationId: getRatingsByMovie
      produces:
        - application/json
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            $ref: '#/definitions/JWT'
        - name: MovieId
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: success
          schema:
            type: array
            items:
              $ref: '#/definitions/Rating'
    post:
      description: rate a movie
      operationId: addRating
      consumes:
        - application/json
      parameters:
        - name: Authorization
          in: header
          required: true
          schema:
            $ref: '#/definitions/JWT'
        - name: MovieId
          in: query
          required: true
          schema:
            type: string
        - name: rating
          in: query
          required: true
          schema:
            type: string
        - name: description
          in: body
          required: false
          schema:
            type: string
      responses:
        '200':
          description: created
          schema:
            type: object
definitions:
  Movie:
    type: object
    properties:
      movie_id:
        type: integer
      title:
        type: string
      description:
        type: string
      director:
        type: string
  User:
    type: object
    properties:
      email:
        type: string
  Rating:
    type: object
    properties:
      rating_id:
        type: integer
      user_id:
        type: string
      movie_id:
        type: integer
      rating:
        type: integer
      description:
        type: string
  JWT:
    type: object
    properties:
      jwt:
        type: string
